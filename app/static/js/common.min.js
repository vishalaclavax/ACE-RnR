var leftMsgProcessing,left_page_size=per_page,left_page=2,leftMessageList=!0,leftScrollPos=0;function remove_string(e,o,t){t=t||",";for(var a=e.split(t),s=0;s<a.length;s++)if(a[s]==o)return a.splice(s,1),a.join(t);return e}function get_unread_notification(){$.ajax({url:app_base_url+"notifications/get-unread-notification",type:"get",dataType:"json",cache:!1,data:{},beforeSend:function(){},success:function(e){e.total_unread>0?$("#sideBarNotifCnt").html('<i class="fas fa-envelope"></i> Notifications <span class="notifications" id="sideBarNotifCnt">'+e.total_unread+"</span>"):$("#sideBarNotifCnt").html('<i class="fas fa-envelope"></i> Notifications')}})}function get_pending_nominations(){$.ajax({url:app_base_url+"nominate/get-pending-nomination",type:"get",dataType:"json",cache:!1,data:{},beforeSend:function(){},success:function(e){e.total_unread>0?($("#sideBarNotifCnt").html('<i class="fas fa-trophy"></i> Nomination List <span class="notifications">'+e.total_unread+"</span>"),$("#sideBarNotifMobileCnt").html('<i class="fas fa-trophy"></i> Nomination List <span class="notifications">'+e.total_unread+"</span>")):($("#sideBarNotifCnt").html('<i class="fas fa-trophy"></i> Nomination List'),$("#sideBarNotifMobileCnt").html('<i class="fas fa-trophy"></i> Nomination List'))}})}function leftScrollData(){leftMessageList&&loadMoreEmployee()}function loadMoreEmployee(){$.ajax({url:app_base_url+"load-more-employee/",type:"post",dataType:"json",cache:!1,data:{page:left_page,page_size:left_page_size},beforeSend:function(){$(".overlay").show()},success:function(e){$(".overlay").hide(),0==e.error&&($("#employeeList").append(e.employee_html),leftMsgProcessing=!1,left_page=parseInt(left_page)+1,leftMessageList=!!e.is_data)}})}function getLocalDate(e,o,t){var a=new Date(e),s=new Date,n="",l=(n=e.includes("Z")?new Date(a.getTime()):new Date(a.getTime()-6e4*s.getTimezoneOffset())).getFullYear(),r=parseInt(n.getFullYear().toString().substr(2,2),10),i=n.getMonth()+1,c=n.toLocaleString("default",{month:"short"}),m=n.toLocaleString("default",{month:"long"}),f=i<10?"0"+i:i,d=n.getDate()<10?"0"+n.getDate():n.getDate(),u=n.getHours()<10?"0"+n.getHours():n.getHours(),g=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),p=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds(),_="";if("yyyy-mm-dd"==o?_=l+"-"+f+"-"+d:"mm-dd-yyyy"==o?_=f+"-"+d+"-"+l:"dd-mm-yyyy"==o?_=d+"-"+f+"-"+l:"dd-mm-yy"==o?_=d+"-"+f+"-"+r:"mm-dd-yy"==o?_=f+"-"+d+"-"+r:"yy-mm-dd"==o?_=r+"-"+f+"-"+d:"j m, Y"==o?_=d+" "+c+", "+l:"m j, Y"==o?_=c+", "+d+" "+l:"M j, Y"==o?_=m+" "+d+", "+l:"j M, Y"==o&&(_=d+" "+m+", "+l),"ampm"==t){var $=parseInt(u)>=12?"PM":"AM";u=(u=parseInt(u)%12)||12,timeStpDate=_+" "+u+":"+g+" "+$}else timeStpDate=_+" "+u+":"+g+":"+p;return timeStpDate}$(document).ready((function(){get_pending_nominations(),$("#imgmobupload").change((function(){$("#upload_mob_form").submit()})),$("#navbar").on("click",(function(){$("#navbar").toggleClass("close"),$(".nveMenu").toggleClass("is-opened"),$(".overlay").toggleClass("is-on")})),$(".overlay").on("click",(function(){$(this).removeClass("is-on"),$("#navbar").removeClass("close"),$(".nveMenu").removeClass("is-opened")})),$("#sidebarToggle").on("click",(function(){$(".sidebarRight").toggleClass("open"),$(".sidebarRight").hasClass("open")?$("#sidebarToggle").children(".fas").toggleClass("fa-tasks fa-times"):$("#sidebarToggle").children(".fas").addClass("fa-tasks").removeClass("fa-times")})),$("form#upload_excel_form").on("submit",(function(e){console.log("in upload"),console.log(new FormData($("#upload_excel_form")[0])),console.log("FormData($(#upload_excel_form)-------------"),$.ajax({url:"/upload-excel",type:"post",contentType:!1,processData:!1,cache:!1,enctype:"multipart/form-data",data:new FormData($("#upload_excel_form")[0]),beforeSend:function(){$(".loaderbox").show()},success:function(e){$(".loaderbox").hide(),0==e.error?($("#userUploadedImages").attr("src",e.user_img),window.location.reload()):$.growl.error({title:"User Image ",message:e.msg,size:"large"})},complete:function(){}})})),$("#upload_form").validate({errorElement:"p",ignore:[],rules:{},messages:{},errorPlacement:function(e,o){e.insertAfter(o)},submitHandler:function(){$.ajax({url:app_base_url+"upload-image",type:"post",contentType:!1,processData:!1,cache:!1,enctype:"multipart/form-data",data:new FormData($("#upload_form")[0]),beforeSend:function(){$(".loaderbox").show()},success:function(e){$(".loaderbox").hide(),0==e.error?($("#userUploadedImages").attr("src",e.user_img),window.location.reload()):$.growl.error({title:"User Image ",message:e.msg,size:"large"})},complete:function(){}})}}),$("#upload_mob_form").validate({errorElement:"p",ignore:[],rules:{},messages:{},errorPlacement:function(e,o){console.log(e),e.insertAfter(o)},submitHandler:function(){$.ajax({url:app_base_url+"upload-image-mobile",type:"post",contentType:!1,processData:!1,cache:!1,enctype:"multipart/form-data",data:new FormData($("#upload_mob_form")[0]),beforeSend:function(){$(".loaderbox").show()},success:function(e){$(".loaderbox").hide(),0==e.error?($("#userUploadedMobileImages").attr("src",e.user_img),window.location.reload()):$.growl.error({title:"User Image ",message:e.msg,size:"large"})},complete:function(){}})}}),$(".my_custom_scroll").scroll((function(e){if(leftMsgProcessing)return!1;if(leftScrollPos!=$(".my_custom_scroll").scrollTop()){if(leftScrollPos>=$(".my_custom_scroll").scrollTop())return leftScrollPos=$(".my_custom_scroll").scrollTop(),!1;leftScrollPos=$(".my_custom_scroll").scrollTop()}$(this).scrollTop()+$(this).innerHeight()+2>=$(this)[0].scrollHeight&&(leftMsgProcessing=!0,leftScrollData())}))}));